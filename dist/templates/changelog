* Fri May 17 2024 Jianping Liu <frankjpliu@tencent.com> - 6.6.30-5
- emm: update emm to v0.1.4
- config: enable CONFIG_SQUASHFS_ZSTD
- KVM: x86: Use actual kvm_cpuid.base for clearing KVM_FEATURE_PV_UNHALT
- KVM: x86: Introduce __kvm_get_hypervisor_cpuid() helper
- ksmbd: fix slab-out-of-bounds in smb_strndup_from_utf16()
- ksmbd: fix potencial out-of-bounds when buffer offset is invalid
- KVM: x86: Virtualize HWCR.TscFreqSel[bit 24]
- KVM: x86: Allow HWCR.McStatusWrEn to be cleared once set
- cpustat: make get_iowait_time external

* Mon May 13 2024 Jianping Liu <frankjpliu@tencent.com> - 6.6.30-4
- 3snic：change sssnic kernel driver name Merge pull request !159 from cleanerleon/next
- change kernel driver name to sssnic
- Hygon: CSV3 patch series part 1 (Secure memory management and initialization) Merge pull request !157 from hanliyang/next_CSV3-host-cma-smr-smcr
- crypto: ccp: Add SET_SMR/SET_SMCR commands for CSV3
- x86/mm: Manage CSV3 guest's private memory by CMA
- crypto: ccp: Define CSV3 key management command id
- KVM: SEV: Pin SEV guest memory out of CMA area
- Hygon：Fixed bugs related to THP allocation and memory page migration Merge pull request !154 from hanliyang/next_mm-fix
- mm/gup: don't check if a page is in lru before draining it
- mm/page_alloc: don't use PCP list for THP-sized allocations when using PF_MEMALLOC_PIN
- Hygon: Support reuse ASID feature for Hygon CSV Merge pull request !156 from hanliyang/next_CSV-reuse-ASID
- KVM: SVM: Add support for different CSV guests to reuse the same ASID
- Hygon: Support passthru DCU to virtual machine Merge pull request !151 from hanliyang/next_hydcu
- drm/hygon: Add support to passthrough Hygon DCU to virtual machine
- Hygon: Some enhancement and bugfixes for HYGON SME/CSV/CSV2 Merge pull request !150 from hanliyang/next_SME_CSV1_CSV2_robust
- KVM: SVM: Unmap ghcb pages if they're still mapped when destroy guest
- anolis: x86/setup: Preserve _ENC flag when initrd is being relocated
- anolis: mm/early_ioremap.c: Always build early_memremap_prot() in x86
- KVM: x86: Fix KVM_GET_MSRS stack info leak
- KVM: SEV: Do not intercept accesses to MSR_IA32_XSS for SEV-ES guests
- x86/head/64: Flush caches for .bss..decrypted section after CR3 switches to early_top_pgt
- KVM: x86: Calls is_64_bit_hypercall() instead of is_64_bit_mode() in complete_hypercall_exit()
- x86/csv2: Keep in atomic context when holding ghcb page if the #VC comes from userspace
- KVM: SVM: Fix the available ASID range for CSV2 guest
- mm/unevictable: avoid root memcg calling mem_cgroup_scan_tasks to  trigger BUG_ON
- config: add SIMPLEFB and SIMPLEDRM

* Sat May 11 2024 Jianping Liu <frankjpliu@tencent.com> - 6.6.30-3
- config: add some drm configs to support more drm

* Thu May  9 2024 Jianping Liu <frankjpliu@tencent.com> - 6.6.30-2
- irqchip/loongson-pch-pic: Update interrupt registration policy
- Merge linux 6.6.30
- Merge linux 6.6.29
- Merge branch 'ock/next'
- !146 [next-6.6]kunpeng：Backport hns3 features and bugfixes Merge pull request !146 from hongrongxuan/linux-6.6/next-ronson-dev
- net: hns3: add support for Hisilicon ptp sync device
- net: hns3: fix port vlan filter not disabled problem in dynamic vlan mode
- net: hns3: default select PAGE_POOL_STATS
- net: hns3: fix kernel crash when devlink reload during vf initialization
- net: hns3: support set/get VxLAN rule of rx flow director by ethtool
- net: ethtool: add VxLAN to the NFC API
- net: hns3: Add support for some CMIS transceiver modules
- net: sfp: Synchronize some CMIS transceiver modules from ethtool
- net: hns3: add command queue trace for hns3
- net: hns3: dump more reg info based on ras mod
- net: hns3: add support for page_pool_get_stats
- net: hns3: add support to query scc version by devlink info
- net: hns3: correct the logic of hclge_sync_vf_qb_mode()
- net: hns3: add support for FD counter
- net: hns3: allocate fd counter for queue bonding
- net: hns3: refactor the debugfs for dumping FD tcam
- net: hns3: add queue bonding mode support for VF
- net: hns3: add support for queue bonding mode of flow director
- net: hns3: add checking for vf id of mailbox
- net: hns3: fix reset timeout under full functions and queues
- net: hns3: fix delete tc fail issue
- net: hns3: Disable SerDes serial loopback for HiLink H60
- net: hns3: add new 200G link modes for hisilicon device
- net: hns3: add input parameters checking
- net: hns3: add extend interface support for read and write phy register
- net: hns3: add support set led
- net: hns3: add support set mac state
- net: hns3: add support detect port wire type
- net: hns3: add support PF provides customized interfaces to detect port faults.
- net: hns3: support set pfc pause trans time
- net: hns3: add support disable nic clock
- net: hns3: add support config and query serdes lane status
- net: hns3: add supports configure optical module enable
- net: hns3: add support query the presence of optical module
- net: hns3: add support modified tx timeout
- net: hns3: add support query port ext information
- net: hns3: add support configuring function-level interrupt affinity
- net: hns3: add support clear mac statistics
- net: hns3: add support to get/set 1d torus param
- net: hns3: add supports fast reporting of faulty nodes
- net: hns3: add supports pfc storm detection and suppression
- net: hns3: add support customized exception handling interfaces
- net: hns3: add some link modes for hisilicon device
- net: hns3: add vf fault detect support
- net: hns3: add hns3 vf fault detect cap bit support
- kunpeng：Backport some bugfixes for hisi_sas Merge pull request !143 from chenyi/linux-6.6/next-cy-dev
- scsi: hisi_sas: Modify the deadline for ata_wait_after_reset()
- scsi: hisi_sas: Remove hisi_hba->timer for v3 hw
- scsi: hisi_sas: Check whether debugfs is enabled before removing or releasing it
- scsi: libsas: Allocation SMP request is aligned to ARCH_DMA_MINALIGN
- scsi: hisi_sas: Fix the deadlock issue that occurs during automatic dump
- scsi: hisi_sas: Handle the NCQ error returned by D2H frame
- scsi: hisi_sas: Remove redundant checks for automatic debugfs dump
- scsi: hisi_sas: Allocate DFX memory during dump trigger
- scsi: hisi_sas: Directly call register snapshot instead of using workqueue
- scsi: hisi_sas: Check usage count only when the runtime PM status is RPM_SUSPENDING
- scsi: hisi_sas: Add slave_destroy interface for v3 hw
- Revert "scsi: hisi_sas: Disable SATA disk phy for severe I_T nexus reset failure"
- Hygon:Update ccp-crypto driver to support Hygon 4th CPU & add hct.ko module which needed by HCT engine Merge pull request !149 from partyCoder/next
- Commit Message: Support 1024 processes simutaneously in the hct-mdev mode.
- Commit Message: Change the maximum number of supported ccps from 16 to 48.
- Commit Message: Compiling hct.ko when the module mdev is disabled.
- ccp: supporting memory encryption features for host vfio-noiommu mode, and wb attribute for the bar memory of virtual machine.
- Add mediated ccp driver support for hygon crypto technology.
- ccp: ccp-crypto support sm2 on Hygon generation 4th CPU
- Hygon:Support CSV(2) guest attestation, CSV firmware update, CSV(2) guest migration, CSV(2) guest reboot, x86-psp communicate interfaces Merge pull request !148 from hanliyang/next
- KVM: SVM: Force flush caches before reboot CSV guest
- KVM: SVM: Add support for rebooting CSV2 guest
- KVM: x86: Introduce control_{pre,post}_system_reset ioctl interfaces
- KVM: SVM: Export MSR_AMD64_SEV_ES_GHCB to userspace for CSV2 guest
- KVM: x86: Restore control registers in __set_sregs() to support CSV2 guest live migration
- KVM: SVM: Add KVM_SEV_RECEIVE_UPDATE_VMSA command
- KVM: SVM: Add KVM_SEV_SEND_UPDATE_VMSA command
- crypto: ccp: Fix definition of struct sev_data_send_update_vmsa
- crypto: ccp: Add another mailbox interrupt support for PSP sending command to X86
- crypto: ccp: Add a new interface for X86 sending command to PSP
- KVM: SVM: Add RECEIVE_UPDATE_DATA command helper to support KVM_CSV_COMMAND_BATCH
- KVM: SVM: Add SEND_UPDATE_DATA command helper to support KVM_CSV_COMMAND_BATCH
- KVM: SVM: Prepare memory pool to allocate buffers for KVM_CSV_COMMAND_BATCH
- KVM: SVM: Add KVM_CSV_COMMAND_BATCH command for applying CSV RING_BUFFER mode
- crypto: ccp: Add support for issue commands in CSV RING_BUFFER mode
- crypto: ccp: Add support to switch to CSV RING_BUFFER mode
- crypto: ccp: Add support for dequeue status in CSV RING_BUFFER mode
- crypto: ccp: Add support for enqueue command pointers in CSV RING_BUFFER mode
- crypto: ccp: Introduce init and free helpers to manage CSV RING_BUFFER queues
- crypto: ccp: Implement CSV_DOWNLOAD_FIRMWARE ioctl command
- crypto: ccp: Implement CSV_PLATFORM_SHUTDOWN ioctl command
- crypto: ccp: Implement CSV_PLATFORM_INIT ioctl command
- crypto: ccp: Support DOWNLOAD_FIRMWARE when detect CSV
- driver/virt/coco: Add HYGON CSV Guest dirver.
- KVM: x86: Support VM_ATTESTATION hypercall
- Montage：add support for Montage Mont-TSSE Driver Merge pull request !147 from carrie.cai/next
- add support for Montage Mont-TSSE driver
- Support PSP identification for Hygon 4th CPU and print secure features when running on Hygon CPUs Merge pull request !144 from hanliyang/next_ident-hygon-cc-all-others
- x86/config: Set CONFIG_HYGON_CSV by default
- x86/cpu/hygon: Clear SME feature flag when not in use
- x86/cpufeatures: Add CSV3 CPU feature
- x86/cpufeatures: Add CPUID_8C86_0000_EDX CPUID leaf
- x86/cpu: Detect memory encryption features on Hygon CPUs
- KVM: SVM: Print Hygon CSV support info if support is detected
- crypto: ccp: Print Hygon CSV API version when CSV support is detected
- x86/mm: Print CSV info into the kernel log
- x86/mm: Provide a Kconfig entry to build the HYGON memory encryption support into the kernel
- Documentation/arch/x86: Add HYGON secure virtualization description
- crypto: ccp: Add support to detect CCP devices on Hygon 4th CPUs
- !141 add 3snic 3s9xx NIC driver Merge pull request !141 from cleanerleon/next
- add 3snic 3s9xx driver
- Hyper-V: support Hyper-V synthetic video device
- amdkfd: use calloc instead of kzalloc to avoid integer overflow
- emm: add submodule of emm
- block: fix deadlock between bd_link_disk_holder and partition scan
- md: fix kmemleak of rdev->serial
- Kconfig: delete intel atom and apple human interface device support
- driver: compile mdev.ko by default
- Kconfig: update many tencent.config of x86
- driver: make regmap-mmio.c compiled in by default
- net/proc: added sockets details statistics
- net: rps using pvipi
- smp: introduce a new interface smp_call_function_many_async
- virtio_net: disable napi_tx by default
- tcp: backport two patch from tk4 about gso
- Merge linux 6.6.28
- Merge linux 6.6.27
- dist: config: add LOCALVERSION="+debug" for debug config
- config: enable CONFIG_DEBUG_INFO_BTF in eks config
- exit: wait_task_zombie: kill the no longer necessary spin_lock_irq(siglock)
- fs/proc: do_task_stat: use sig->stats_lock to gather the threads/children stats
- fs/proc: do_task_stat: use __for_each_thread()
- net: ip_tunnel: prevent perpetual headroom growth
- dist: ensure release start with decimal number
- dist: sanitize usage of unamer
- dist: add missing place holder for loongarch64 kabi
- emm/oversell: fix memsw page counter

* Wed Apr 17 2024 Jianping Liu <frankjpliu@tencent.com> - 6.6.26-1
- SUNRPC: discard sv_refcnt, and svc_get/svc_put
- svc: don't hold reference for poolstats, only mutex.
- config: support phytium soc and ampereone pmu
- sched/eevdf: fix soft lockup while __pick_eevdf failed
- Merge linux 6.6.26
- Merge linux 6.6.25
- Merge linux 6.6.24
- Merge linux 6.6.23
- Merge linux 6.6.22
- Merge linux 6.6.21
- x86/perf: Add PMU uncore support for Zhaoxin CPU
- BeiZhongWangXin:Add Chengdu BeiZhongWangXin Technology N5/N6 Series Network Card Driver
- Hygon：Add HGSC_CERT_IMPORT ioctl interface for Hygon CPUs.
- Loogarch:add steal time hypcall software breakpoint pmu support for loongarch kvm
- Add Phytium Display Engine support to the linux-6.6
- Intel: Backport QuickAssist Technology(QAT) in-tree driver
- Loongarch: support loongarch and add kvm support for loongarch
- platform/x86/intel/ifs: Call release_firmware() when handling errors.
- crypto: ccp: Add support to detect Hygon PSP on Hygon 2nd/3rd CPUs
- crypto: ccp: Fixup the capability of Hygon PSP during initialization
- Support zhaoxin cpu
- zhaoxin: Fix CRC32C instruction low performance issue
- crypto: x86/crc32c-intel Exclude low performance CRC32C instruction CPUs
- x86/cpu: Set low performance CRC32C flag on some Zhaoxin CPUs
- x86/cpufeatures: Add low performance CRC32C instruction CPU feature
- ALSA: hda: Add support of Zhaoxin SB HDAC
- x86/cpu: Add detect extended topology for Zhaoxin CPUs
- x86/cpufeatures: Add Zhaoxin feature bits
- btrfs: fix double free of anonymous device after snapshot creation failure
- arm64: Work around Ampere Altra erratum #82288 PCIE_65
- rue/io: fix blkcg_dkstats_show_comm implicit declaration error
- emm: fix compile error of MEMCG_ZRAM_B undeclared
- tcp/dccp: add support for port usage in proportion to allocation
- cgroup: add cgroup.id to show each css id within a cgroup
- tcp: fix issues when enabling tcp_wan_timestamps feature.
- tcp: initialize sysctl_tcp_wan_timestamps to 1 by default.
- net: add net.ipv4.tcp_wan_timestamps sysctl to switch timestamps function
- mm/workingset: fix compile error when using allyesconfig in aarch64
- ck: mm: Pin code section of process in memory
- mm, oom_kill: introduce oom_kill_largest_task sysctl interface
- emm: configs: enabled EMM related configs
- emm: memcg/reclaim: adapt for enhanced memory reclaim interface
- emm: memcg/reclaim: add support for enhanced memory reclaim
- emm: memcg: add support for core memcg handling
- emm: mm: support forcing swappiness for global reclaim
- emm: mm: Kconfig: add EMM config
- emm: memcg, zram: add support for ZRAM memory accounting
- ocfs2: Avoid touching renamed directory if parent does not change
- rue/scx/sched_ext: Add a basic, userland vruntime scheduler
- rue/scx/sched_ext: Implement core-sched support
- rue/scx/sched_ext: Implement sched_ext_ops.cpu_online/offline()
- rue/scx/sched_ext: Implement sched_ext_ops.cpu_acquire/release()
- rue/scx/sched_ext: Implement runnable task stall watchdog
- rue/scx/sched_ext: Implement BPF extensible scheduler class
- script: update check-kabi script
- kabi: provide kabi check/update/create commands for local users
- config: add kernel/configs/tkci.config
- pci: bypass NVMe when booting PCIe storage with 5s delay
- pci: prohibit storage probe delay of virtio block device
- pci: delay 5s to proble multiple storage controllers
- perf vendor events arm64 AmpereOneX: Add core PMU events and metrics
- KVM: arm64: Always invalidate TLB for stage-2 permission faults
- KVM: arm64: Avoid soft lockups due to I-cache maintenance
- arm64: tlbflush: Rename MAX_TLBI_OPS
- docs/perf: Add ampere_cspmu to toctree to fix a build warning
- perf: arm_cspmu: ampere_cspmu: Add support for Ampere SoC PMU
- perf: arm_cspmu: Support implementation specific validation
- perf: arm_cspmu: Support implementation specific filters
- perf: arm_cspmu: Split 64-bit write to 32-bit writes
- perf: arm_cspmu: Separate Arm and vendor module
- x86 and arm64 config: add more module config
- config: enable slub debug as default in debug.config
- config: enable CONFIG_HARDLOCKUP_DETECTOR
- Add support for Hygon model 4h~6h processors Merge
- Intel: Backport GNR/SRF PMU uncore support to kernel v6.6
- Intel: Backport SRF/GRR perf cstate support to kernel v6.6
- Intel: Backport SRF LBR branch counter support to kernel v6.6
- Intel-SIG: microcode restructuring backport Merge pull request
- Intel-SIG: backport cluster scheduler wakeup optimization
- SAF & Array BIST support for GNR & SRF
- RDT non-contiguous CBM support

* Wed Dec 20 2023 Kairui Song <kasong@tencent.com> - 6.6.6-2401.0.1
- kabi: freeze kabi for x86_64 and arm64
- x86/mpparse, kexec: switch apic driver early when x2apic is pre-enabled
- tracing: workaround UAF caused by memory ordering issue
- mm/slub.c: sanitize freelist pointer assignment even more
- mm/slub.c: fix a potential UAF
- cgroup: use a standalone workqueue for killing css
- mm/vmscan.c: add cond_resched function call into __shrink_page_cache
- swap: expose required symbols for some 3rd part modules
- swapfile: add a helper get_cached_swap_page_of_type
- mm: memcg: introduce v2's interface to v1
- psi: only show SOME PSI for non-IRQ in cgroup v1
- psi: support cgroup v1 psi accounting
- psi: expose cgroup v1 interface for psi
- psi: link legacy root to psi_system
- sched/psi: simplify cgroup psi retrieving
- arm64: fake a reliable stacktrace for livepath
- arm64: enable livepatch without stable stacktrace
- arm64: basic infrastructure for livepatch
- pagecachelimit: limit the pagecache ratio of totalram
- blkcg: add buffer IO throttle for cgroup v1
- cgroupfs: support stat based on cpuacct
- cgroupfs: fix non inited i_ino when inode created
- cgroupfs: add files inside sys
- cgroupfs: support for proc and sys
- cgroupfs: quota aware support
- cgroupfs: refactor cgroup resource statistics for reuse
- memcg: make meminfo optionally recursive and rework
- memcg: add meminfo and vmstat show
- cpuset: add switch support for cpuset.stat in container
- cpuset: fix cpuset.stat process field value exception
- cpuset: add switch for cpuinfo in container
- cpuset: add loadavg calc for each container
- cpuset: add cpuinfo and stat show
- sysfs: add sysfs attribute to hide disk devices
- blkcg/diskstats/dm: add support for blkcg diskstats
- blkcg/diskstats/md: add support for blkcg diskstats
- blkcg/diskstats: add per blkcg diskstats support
- ext4: Add an error info during new_inode
- ext4: fix soft lockup caused by sbi->s_es_lru
- ceph: add mds request pid info into debugfs
- ceph: Add new mount option req_resend
- ceph: re-send osd requests if timeout
- nvme: add the hotplug info output about drive letter and BDF
- nbd: add the nbd_ignore_blksize_set support
- xfs: add kmem_alloc_by_vmalloc and kmem_alloc_large_dump_stack sysctl
- xfs: set xfs default error level to 5
- ceph: add sysctl to ignore error epoch barrier
- ext3: set nobarrier as default
- block: check whether queue is NULL or not in stats functions
- net: modify default value of host max_orphan
- net: namespaceify sysctl_tcp_max_orphans
- vm: isolate max_map_count by pid namespace
- cpuacct: get the uptime of container
- proc: add pid mapping between host and container
- taskstats: expose taskstats to all netspace
- tcp: make TCP_RTO_MIN/MAX be tunable
- tcp: support self define parameter to tune rto of syn/synack packets
- tcp: introduce sysctl tcp_inherit_buffsize
- net: ipv6 neigh tunnel bypass
- net: add sysctl to control page frag
- net: add sriov debug info
- net: increase tcp listen hash
- tcp: add TCP_FULLNAT_REAL setsockopt options for fullnat real ip
- net: reduce the confliction while multi threads connecting same host
- bonding: add broadcast_arp param to send arp broadcast
- netlink: don't modprobe proto audit & selinux
- tcp: add proc parameter to change init cwnd
- net: add tcp_no_delay_ack to enable absolute quick ack
- tcp: add tcp_loss_init_cwnd sysctl to tunnel packet numbers in loss
- network: default zero bond_devices to support
- tcp: double the default value of thash_entries
- tcp: backoff the commit allowing timestamps even if SYN packet has tsval=0
- net: dev ipv4/v6 stat
- net: add tcp drop stats
- ipmi: set kipmid_max_busy_us default to 1
- sched: adaptive default skew_tick value
- ipc/msg: increase defaults for shmmall, shmmax, msgmax and msgmnb
- mm: increase dirty-ratio from 20 to 40
- tkernel: netfilter: conntrack: add netagent extention slot
- tkernel: net: add toa support
- tkernel: mounts: add shield mountpoint in container support
- tkernel: netatop: add netatop module in kernel/tkernel/
- tkernel: ttools: add ttools module to support ptrace protect
- tkernel: initial support and nonpriv_bind
- sysrq: add ALT+LEFTCTRL to trigger crash dump
- kabi: add paddings and optimize (part 3)
- kabi: add paddings (part 2)
- kabi: add paddings (part 1)
- kabi: add kabi.h
- kabi: modules: better vermagic check on module load
- config: update config for ocks-2401
- dist: config: update config from ocks-2303
- dist: config: add default config files
- dist: fix script checker
- dist: tools/vm -> tools/mm
- dist: move libcpupower.so to kernel-libs
- dist: initial support
- Linux 6.6.6

* Mon Mar 14 2022 Kairui Song <kasong@tencent.com> - 5.17.0-0.20220314git47581bb4d9ae.rc7-tks
- Initial release
