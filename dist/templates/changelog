* Thu Nov  7 2024 Jianping Liu <frankjpliu@tencent.com> - 6.6.58-15
- integrity: add dynamic integrity measurement (DIM) support
- Merge branch 'honglin/release' into 'release' (merge request !220)
- rue/mm: fix suspicious RCU usage in mem_cgroup_account_oom_skip
- rue/mm: fix some sparse warnings of incorrect type in argument
- rue/mm: fix compile error of dereferencing pointer to incomplete type
- rue/mm: fix some sparse warnings due to no previous prototype
- rue/net: fix some sparse warnings in netclassid_cgroup.c
- Merge linux 6.6.58
- kunit/overflow: Fix UB in overflow_allocation_test
- Merge branch 'frankjpliu/master-mr-ocknext' into 'release' (merge request !217)
- Loongarch: Dynamically enable Write Combining
- Loongarch: Driver for loongson SE SDF
- pci/quirks: Enable MSI for LS7A2000 PCIe devices
- !240 [next-6.6] LoongArch: Add AVEC irqchip support and add acpi mcfg quirk for 3C6000
- acpi: mcfg quirk: Increased multi-chip support for the 3C6000
- LoongArch: Add AVEC irqchip support
- !239 [next-6.6] LoongArch: Change SHMLBA from SZ_64K to PAGE_SIZE
- LoongArch: Change SHMLBA from SZ_64K to PAGE_SIZE
- rue/io: fix child blkcg of hier buffered write can not exceed 2MB
- crashkernel: auto adjust crashkernel min size to 800MB for KASAN
- sli: fix crash when open the sli.monitor file in rw mode
- Merge linux 6.6.57
- Merge branch 'cunhuang/jitterentropy-failed' into 'master' (merge request !209)
- crypto: jitter - set default OSR to 3
- crypto: jitter - use permanent health test storage
- crypto: jitter - reuse allocated entropy collector
- crypto: jitter - Allow configuration of oversampling rate
- crypto: jitter - Allow configuration of memory size
- crypto: jitter - add RCT/APT support for different OSRs
- watchdog: handle the ENODEV failure case of lockup_detector_delay_init() separately
- Merge branch 'haisu/master-fix-rue-lore-issues' into 'master' (merge request !207)
- rue/io: mem_cgroup_bind_blkio_write also require CONFIG_SWAP
- rue/io: fix sparse error of restricted blk_opf_t degrades to integer
- rue/io: fix compile errors of redefinition blkg_policy_data
- config: iommu: default arm64 iommu Lazy mode
- mpt3sas: add mpt3sas commercial-quality driver
- Merge branch 'likexu/kvm/fixes' into 'master' (merge request !205)
- KVM: x86: Add fastpath handling of HLT VM-Exits
- KVM: x86: Reorganize code in x86.c to co-locate vCPU blocking/running helpers
- KVM: x86: Exit to userspace if fastpath triggers one on instruction skip
- KVM: x86: Dedup fastpath MSR post-handling logic
- KVM: x86: Re-enter guest if WRMSR(X2APIC_ICR) fastpath is successful
- KVM: x86: Re-split x2APIC ICR into ICR+ICR2 for AMD (x2AVIC)
- KVM: nVMX: Assert that vcpu->mutex is held when accessing secondary VMCSes
- KVM: nVMX: Explicitly invalidate posted_intr_nv if PI is disabled at VM-Enter
- KVM: x86: Fold kvm_get_apic_interrupt() into kvm_cpu_get_interrupt()
- KVM: nVMX: Detect nested posted interrupt NV at nested VM-Exit injection
- KVM: nVMX: Suppress external interrupt VM-Exit injection if there's no IRQ
- KVM: nVMX: Get to-be-acknowledge IRQ for nested VM-Exit at injection site
- KVM: x86: Move "ack" phase of local APIC IRQ delivery to separate API
- KVM: Fix coalesced_mmio_has_room() to avoid premature userspace exit
- KVM: x86: Fully defer to vendor code to decide how to force immediate exit
- KVM: VMX: Handle KVM-induced preemption timer exits in fastpath for L2
- KVM: x86: Move handling of is_guest_mode() into fastpath exit handlers
- KVM: VMX: Handle forced exit due to preemption timer in fastpath
- KVM: VMX: Re-enter guest in fastpath for "spurious" preemption timer exits
- KVM: x86: Plumb "force_immediate_exit" into kvm_entry() tracepoint
- Merge branch 'haisu/master-cve-v9' into 'master' (merge request !204)
- btrfs: don't BUG_ON on ENOMEM from btrfs_lookup_extent_info() in walk_down_proc()
- btrfs: handle errors from btrfs_dec_ref() properly
- binfmt_elf_fdpic: fix AUXV size calculation when ELF_HWCAP2 is defined
- f2fs: fix null reference error when checking end of zone
- nfs: pass explicit offset/count to trace events
- Merge linux 6.6.56
- Merge linux 6.6.55
- Merge linux 6.6.54
- Merge linux 6.6.53
- Merge linux 6.6.52
- Merge linux 6.6.51
- Merge linux 6.6.50
- Merge linux 6.6.49
- Merge linux 6.6.48
- Merge branch 'haisu/master-tryrue-20240905-merge-honglin' into 'master' (merge request !197)
- rue/io: introduce wbt class for cgroup priority
- rue/io: skip throttle REQ_META/REQ_PRIO IO
- rue/io: buffered_write_bps hierarchy support
- rue/io: support readwrite unified configuration
- rue/io: Add iocost and iolatency entry for cgroup v1
- rue/io: add io_cgv1_buff_wb to enable buffer IO counting in cgroup v1
- rue/io: introduce per mem_cgroup sync interface
- rue/io: add bufio isolation based for cgroup v1
- rue/io: Add bps information to blkio.throttle.stat
- rue/io: Add blkio.throttle.stat
- rue/io: add buffer IO writeback throtl for cgroup v1
- rue/io: add io_qos switch and throtl hierarchy
- rue/io: Enable CONFIG_BLK_DEV_THROTTLING_CGROUP_V1 configuration
- rue/io: Correct the alloc type to disk_stats
- rue/io: add support for recursive diskstats
- rue/io: blkcg export blkcg symbols to be used in bpf accounting
- rue/mm: add sysctl_vm_use_priority_oom to enable priority oom for all cgroups
- rue/mm: compatible with mglru for pagecache limit
- rue/mm: fix file page_counter 'memcg->pagecache' error when THP enabled
- rue/mm: introduce new feature to async clean dying memcgs
- rue/mm: introduce memcg page cache hit & miss ratio tool
- rue/mm: introduce memory allocation latency for per-cgroup tool
- rue/mm: async free memory while process exiting
- rue/mm: pagecache limit per cgroup support
- rue/mm: add memory cgroup async page reclaim mechanism
- rue/mm: introduce memcg priority oom
- rue/mm: add priority reclaim support
- pagecachelimit: set an initial value for may_deactivate in shrink page cache
- rue/net: avoid wrong memory access to struct net_device
- rue/net: avoid wrong memory access to struct cgroup_cls_state
- rue/net: adapt to the new rue modular framework
- rue/net: add dynamic bandwidth allocation between online cgroups
- rue/net: add netdev-based rate limit for per cgroup
- rue/net: add total bandwidth limit for multiprio preemption
- rue/net: add support for cgroup whitelist ports
- rue/net: add rx && tx rate limit for per cgroup
- rue/net: init netcls traffic controller
- rue: Revert "kallsyms: unexport kallsyms_lookup_name() and kallsyms_on_each_symbol()"
- rue: Add support for rue modularization
- rue: init rue module
- rue: cgroup priority
- blkcg/diskstats: Fix the extra cpu parameter
- mm: set default watermark_boost_factor value to 0
- Revert "io/tqos: merge buffer io limit series patch from brookxu, and rework some function."
- Revert "io/tqos: add sysctl_buffer_io_limit switch for buffer io limit."
- Revert "cgroup: allow cgroup to split direct io and buffered io into different blkio cgroup"
- emm: update to v0.1.7.4
- dist,spec: provide kernel-debug-debuginfo in debug version
- dist,sepc: supprot kernel-debug in core and modules and devel rpm
- Merge branch 'frankjpliu/master-mr-ocknext' into 'master' (merge request !202)
- !234 [next-6.6] Intel: Backport to support Intel IFS(In Field Scan) SBAF on GNR for kernel 6.6
- platform/x86/intel/ifs: Fix SBAF title underline length
- trace: platform/x86/intel/ifs: Add SBAF trace support
- platform/x86/intel/ifs: Add SBAF test support
- platform/x86/intel/ifs: Add SBAF test image loading support
- platform/x86/intel/ifs: Refactor MSR usage in IFS test code
- selftests: ifs: verify IFS ARRAY BIST functionality
- selftests: ifs: verify IFS scan test functionality
- selftests: ifs: verify test image loading functionality
- selftests: ifs: verify test interfaces are created by the driver
- platform/x86/intel/ifs: Disable irq during one load stage
- platform/x86/intel/ifs: trace: display batch num in hex
- platform/x86/intel/ifs: Classify error scenarios correctly
- platform/x86/intel/ifs: Remove unnecessary initialization of 'ret'
- platform/x86/intel/ifs: Add an entry rendezvous for SAF
- platform/x86/intel/ifs: Replace the exit rendezvous with an entry rendezvous for ARRAY_BIST
- platform/x86/intel/ifs: Add current batch number to trace output
- platform/x86/intel/ifs: Trace on all HT threads when executing a test
- ALSA: hda: Add support for Hygon family 18h model 10h HD-Audio
- hwmon/k10temp: Add support for Hygon family 18h model 10h
- EDAC/amd64: Add support for Hygon family 18h model 10h
- x86/amd_nb: Add support for Hygon family 18h model 10h
- x86/cpu: Get LLC ID for Hygon family 18h model 10h
- perf/x86/uncore: Add L3 PMU support for Hygon family 18h model 7h
- EDAC/amd64: Add support for Hygon family 18h model 7h
- x86/amd_nb: Add support for Hygon family 18h model 7h
- crypto: ccp: add more checks for sev_dev_hooks_installed
- config: set CONFIG_KASAN_STACK=y in debug.config
- net/netlat: fix a deadlock when reset the /proc/net/twatcher/log
- xfs: allow symlinks with short remote targets
- Merge branch 'likexu/kvm/vpmu/fixes' into 'master' (merge request !200)
- KVM: x86/pmu: Explicitly check NMI from guest to reducee false positives
- KVM: x86: Get CPL directly when checking if loaded vCPU is in kernel mode
- KVM: VMX: Disable LBR virtualization if the CPU doesn't support LBR callstacks
- perf/x86/intel: Expose existence of callback support to KVM
- KVM: VMX: Snapshot LBR capabilities during module initialization
- KVM: x86/pmu: Explicitly check for RDPMC of unsupported Intel PMC types
- KVM: x86/pmu: Treat "fixed" PMU type in RDPMC as index as a value, not flag
- KVM: x86/pmu: Disallow "fast" RDPMC for architectural Intel PMUs
- KVM: x86/pmu: Apply "fast" RDPMC only to Intel PMUs
- KVM: x86/pmu: Prioritize VMX interception over #GP on RDPMC due to bad index
- KVM: x86/pmu: Don't ignore bits 31:30 for RDPMC index on AMD
- KVM: x86/pmu: Get eventsel for fixed counters from perf
- KVM: x86/pmu: Setup fixed counters' eventsel during PMU initialization
- KVM: x86/pmu: Remove KVM's enumeration of Intel's architectural encodings
- KVM: x86/pmu: Allow programming events that match unsupported arch events
- KVM: x86/pmu: Always treat Fixed counters as available when supported
- KVM: x86/pmu: Track emulated counter events instead of previous counter
- KVM: x86/pmu: Update sample period in pmc_write_counter()
- KVM: x86/pmu: Remove manual clearing of fields in kvm_pmu_init()
- KVM: x86/pmu: Stop calling kvm_pmu_reset() at RESET (it's redundant)
- selftests/bpf: DENYLIST.aarch64: Skip fexit_sleep again
- bpf, arm64: Fix trampoline for BPF_TRAMP_F_CALL_ORIG
- closures: Change BUG_ON() to WARN_ON()
- dist,Makefile: inherit the existing value of the DISABLED variable
- config: configure panic_timeout=-1, restart immediately when panic occurs
- config,debug: set CONFIG_LOCALVERSION="+debug" in debug*.config
- dist,Makefile: generic-debug config only build kernel rpm
- config: split debug.config to debug.config and debug-sched.config

* Mon Sep 23 2024 Jianping Liu <frankjpliu@tencent.com> - 6.6.47-12
- crypto: ccp: fix the sev_do_cmd panic on non-Hygon platforms
- emm: upadate to v0.1.7.3
- emm: fix cgroup initilization check
- tools headers UAPI: Sync kvm headers with the kernel sources
- KVM: x86: Prevent excluding the BSP on setting max_vcpu_ids
- KVM: x86: Limit check IDs for KVM_SET_BOOT_CPU_ID
- KVM: Reject overly excessive IDs in KVM_CREATE_VCPU
- KVM: x86: Make x2APIC ID 100% readonly
- KVM: Introduce KVM_SET_USER_MEMORY_REGION2
- config/x86: Add EROFS_FS and CACHEFILES for image-granularity acceleration
- config,x86: open edr
- riscv/purgatory: align riscv_kernel_entry
- config,x86: disable CONFIG_IOMMU_DEBUGFS
- hung_task,watchdog: set thresh time to 600 seconds
- zhaoxin_rng: Remove redundant pr_err log after matching cpu_ids
- config,x86: set CONFIG_HW_RANDOM_ZHAOXIN to m
- emm: fix panic in kdump
- config: trace: enable CONFIG_FUNCTION_GRAPH_RETVAL
- rue/scx: Fix cgroupv2 cpu controller regression
- watchdog: increase watchdog_thresh max value to 300 in debug kernel
- dist: delete useless code in kernel.template.spec
- i2c/zhaoxin: switch i2c registration to devm functions
- lkp: intel: selftests/bpf: Add netlink helper library

* Tue Aug 27 2024 Jianping Liu <frankjpliu@tencent.com> - 6.6.47-11
- config,oc: support WLAN and MTD and more SND drivers
- Merge linux 6.6.47
- Merge linux 6.6.46
- Merge linux 6.6.45
- Merge OCK next branch to TK5 master branch
- x86/hpet: Read HPET directly if panic in progress
- i2c/zhaoxin: I2C controller driver enhancement and optimization
- x86/mce: Add NMIs setup in machine_check func
- x86/mce/zhaoxin: Enable mcelog to decode PCIE, ZDI/ZPI, and DRAM errors
- x86/mce: Set bios_cmci_threshold for CMCI threshold
- perf/x86/zhaoxin/uncore: update KX-7000 support
- iommu/dma: Fix not fully traversing iova reservations issue
- x86/cpu: Remove pointless evaluation of x86_coreid_bits
- i2c: smbus: Add support for Zhaoxin SMBUS controller
- anolis: efi: cper: Add Zhaoxin/Centaur ZDI/ZPI error decode
- ata: ahci: Add support for AHCI SGPIO Enclosure Management
- Set ASYM_PACKING Flag on Zhaoxin KH-40000 platform
- cpufreq: ACPI: add ITMT support when CPPC enabled
- iommu/vt-d: Add support for detecting ACPI namespace device in RMRR
- Add kh40000_iommu_dma_ops for KH-40000 platform
- Add kh40000_direct_dma_ops for KH-40000 platform
- Add early quirk to identify kh-40000
- Merge OCK next branch to TK5 master branch
- !201 [next-6.6] Intel: Backport some core PMU bugfixes to kernel 6.6
- !200 [next-6.6] Intel: Backport SPR/EMR CXL and HBM perfmon support to kernel 6.6
- USB:Fix kernel NULL pointer when unbind UHCI form vfio-pci
- hwmon: Add support for Zhaoxin core temperature monitoring
- anolis: Add support for Zhaoxin Serial ATA IDE.
- rue/scx: Kill user tasks in SCHED_EXT when scheduler is gone
- rue/scx: Add readonly sysctl knob kernel.cpu_qos for SCHED_BT compatibility
- rue/scx: Add /proc/bt_stat to maintain SCHED_BT compatibility
- rue/scx: Add cpu.offline to maintain SCHED_BT compatibility
- rue/scx: Add cpu.scx to the cpu cgroup controller
- rue/scx: Add /proc/scx_stat to do scx cputime accounting
- rue/scx: Fix lockdep warn on printk with rq lock held
- rue/scx: Reorder scx_fork_rwsem, cpu_hotplug_lock and scx_cgroup_rwsem
- Revert "sched: adaptive default skew_tick value"
- KVM: x86: Don't sync user-written TSC against startup values
- KVM: s390: Don't re-setup dummy routing when KVM_CREATE_IRQCHIP
- KVM: x86: Don't re-setup empty IRQ routing when KVM_CAP_SPLIT_IRQCHIP
- KVM: Setup empty IRQ routing when creating a VM
- kabi: Introduce CONFIG_KABI_RESERVE
- null_blk: Fix return value of nullb_device_power_store()
- null_blk: fix null-ptr-dereference while configuring 'power' and 'submit_queues'
- [PATCH] security: add security hook point
- dist: provide mlnx-ofed-dist rpm
- drivers,dist: add mlnx commercial quality drivers
- submodule: update emm and thirdparty/release-drivers
- net: csig toa patch toa patch from csig luckyqiu@tencent.com
- Merge linux 6.6.44

* Thu Aug 1 2024 Jianping Liu <frankjpliu@tencent.com> - 6.6.43-10
- !199 [next-6.6] LoongArch: Add writecombine support for DMW-based ioremap and fix kexec boot faild issue.
- pci-driver: Do not disable PCIE ports and bridge on kexec reboot
- LoongArch: enable CONFIG_CRYPTO_XTS by default
- LoongArch: Add writecombine support for DMW-based ioremap()
- Merge linux 6.6.43
- Merge linux 6.6.42
- !197 [next-6.6] AMD: Backport Turin patches from upstream Merge pull request !197 from kile2009/next-turin-6.6
- perf/x86/amd/core: Define a proper ref-cycles event for Zen 4 and later
- x86/CPU/AMD: Add models 0x10-0x1f to the Zen5 range
- x86/CPU/AMD: Do the common init on future Zens too
- x86/CPU/AMD: Add more models to X86_FEATURE_ZEN5
- x86/CPU/AMD: Add X86_FEATURE_ZEN5
- x86/CPU/AMD: Drop now unused CPU erratum checking function
- x86/CPU/AMD: Get rid of amd_erratum_1485[]
- x86/CPU/AMD: Get rid of amd_erratum_400[]
- x86/CPU/AMD: Get rid of amd_erratum_383[]
- x86/CPU/AMD: Rename init_amd_zn() to init_amd_zen_common()
- x86/CPU/AMD: Call the spectral chicken in the Zen2 init function
- x86/CPU/AMD: Move the Zen3 BTC_NO detection to the Zen3 init function
- Revert "vfio/type1: Unpin zero pages"
- drivers/thirdparty: keep compile bnxt_re if not using thirdparty drivers
- iommu/arm-smmu: Use the correct type in nvidia_smmu_context_fault()
- thermal: intel: powerclamp: fix mismatch in get function for max_idle
- Merge linux 6.6.41
- drivers/thirdparty: add copy-drivers.sh to using thirdparty drivers
- Merge linux 6.6.40
- Merge linux 6.6.39
- Merge linux 6.6.38
- Merge linux 6.6.37
- config: enable CONFIG_WIREGUARD
- Merge linux 6.6.36
- kabi: fix check-kabi file path when checking kABI
- x86/tencentconfig: Enable CONFIG_UNWINDER_ORC in tencent.config
- Merge linux 6.6.35
- emm: don't set zram_memcg_nocharge as true until module load

* Wed Jun 19 2024 Jianping Liu <frankjpliu@tencent.com> - 6.6.34-9
- dist: do not run scripts fail in kernel.template.spec
- drm/amdgpu: Fix possible NULL dereference in amdgpu_ras_query_error_status_helper()

* Mon Jun 17 2024 Jianping Liu <frankjpliu@tencent.com> - 6.6.34-8
- Merge linux 6.6.34

* Thu Jun 13 2024 Jianping Liu <frankjpliu@tencent.com> - 6.6.33-7
- emm: update to v0.1.5
- arm64: add unprivileged instruction support
- arm64: fix the error for instruction :b9400000
- arm64: Add new code for unaligned pcie access
- arm64: remove the hardcode about PCI address checking
- arm64: Add alignment faults handler for Advanced SIMD load/store single
- arm64: Add a fixup handler for alignment faults in aarch64 code
- arm64: update Work around Ampere Altra erratum #82288 PCIE_65
- Merge Linux 6.6.33
- [next-6.6] Intel: Backport Granite Rapids RAPL PMU support to kernel 6.6 Merge pull request !186
- powercap: intel_rapl_tpmi: Enable PMU support
- powercap: intel_rapl: Introduce APIs for PMU support
- powercap: intel_rapl: Sort header files
- [next-6.6] LoongArch:  Fix some irqchip/loongson-eiointc issues and kdump function for loongarch. Merge pull request !182
- anolis: LoongArch: fix efi map page table error
- Revert "LoongArch: kdump: Add memory reservation for old kernel"
- Revert "LoongArch: Fix kdump failure on v40 interface specification"
- Revert "LoongArch: kdump: Add high memory reservation"
- irqchip/loongson-eiointc: fix gsi register error
- irqchip: LoongArch: Fix secondary bridge routing errors
- PCI/MSI: LoongArch: Limit min pci msi-x/msi vector number
- [next-6.6]Intel: Backport QuickAssist Technology(QAT) live migration for in-tree driver Merge pull request !184
- x86: configs: Enable QAT_VFIO_PCI as kernel module
- crypto: qat - Fix ADF_DEV_RESET_SYNC memory leak
- crypto: qat - specify firmware files for 402xx
- crypto: qat - validate slices count returned by FW
- crypto: qat - improve error logging to be consistent across features
- crypto: qat - improve error message in adf_get_arbiter_mapping()
- crypto: qat - implement dh fallback for primes > 4K
- crypto: qat - Fix spelling mistake "Invalide" -> "Invalid"
- crypto: qat - Avoid -Wflex-array-member-not-at-end warnings
- vfio/qat: Add vfio_pci driver for Intel QAT SR-IOV VF devices
- crypto: qat - implement interface for live migration
- crypto: qat - add interface for live migration
- crypto: qat - add bank save and restore flows
- crypto: qat - expand CSR operations for QAT GEN4 devices
- crypto: qat - rename get_sla_arr_of_type()
- crypto: qat - relocate CSR access code
- crypto: qat - move PFVF compat checker to a function
- crypto: qat - relocate and rename 4xxx PF2VM definitions
- crypto: qat - adf_get_etr_base() helper
- iommu/vt-d: Set variable intel_dirty_ops to static
- iommufd/selftest: Fix _test_mock_dirty_bitmaps()
- iommufd/selftest: Fix page-size check in iommufd_test_dirty()
- iommu/vt-d: Enhance capability check for nested parent domain allocation
- iommufd/selftest: Test IOMMU_HWPT_GET_DIRTY_BITMAP_NO_CLEAR flag
- iommufd/selftest: Test out_capabilities in IOMMU_GET_HW_INFO
- iommufd/selftest: Test IOMMU_HWPT_GET_DIRTY_BITMAP
- iommufd/selftest: Test IOMMU_HWPT_SET_DIRTY_TRACKING
- iommufd/selftest: Test IOMMU_HWPT_ALLOC_DIRTY_TRACKING
- iommufd/selftest: Expand mock_domain with dev_flags
- iommu/vt-d: Access/Dirty bit support for SS domains
- iommu/amd: Access/Dirty bit support in IOPTEs
- iommu/amd: Add domain_alloc_user based domain allocation
- iommufd: Add a flag to skip clearing of IOPTE dirty
- iommufd: Add capabilities to IOMMU_GET_HW_INFO
- iommufd: Add IOMMU_HWPT_GET_DIRTY_BITMAP
- iommufd: Add IOMMU_HWPT_SET_DIRTY_TRACKING
- iommufd: Add a flag to enforce dirty tracking on attach
- iommufd: Correct IOMMU_HWPT_ALLOC_NEST_PARENT description
- iommu: Add iommu_domain ops for dirty tracking
- iommufd/iova_bitmap: Move symbols to IOMMUFD namespace
- vfio: Move iova_bitmap into iommufd
- vfio/iova_bitmap: Export more API symbols
- iommufd/selftest: Rework TEST_LENGTH to test min_size explicitly
- iommu/vt-d: Add domain_alloc_user op
- iommufd/selftest: Add domain_alloc_user() support in iommu mock
- iommufd/selftest: Iterate idev_ids in mock_domain's alloc_hwpt test
- iommufd: Support allocating nested parent domain
- iommufd: Flow user flags for domain allocation to domain_alloc_user()
- iommufd: Use the domain_alloc_user() op for domain allocation
- iommu: Add new iommu op to create domains owned by userspace
- !183 [next-6.6] Intel IAA Compression Accelerator Crypto Driver (iaa_crypto) Merge pull request !183 from Xiaochen Shen/intel-iaa-crypto-driver-next-6.6
- x86/config: Add kernel config for Intel IAA crypto driver
- dmaengine: idxd: Avoid unnecessary destruction of file_ida
- dmaengine: idxd: Check for driver name match before sva user feature
- crypto: iaa - Use cpumask_weight() when rebalancing
- crypto: iaa - Fix some errors in IAA documentation
- crypto: iaa - Change iaa statistics to atomic64_t
- crypto: iaa - Add global_stats file and remove individual stat files
- crypto: iaa - Remove comp/decomp delay statistics
- crypto: iaa - fix decomp_bytes_in stats
- crypto: iaa - Fix nr_cpus < nr_iaa case
- crypto: iaa - fix the missing CRYPTO_ALG_ASYNC in cra_flags
- crypto: iaa - Fix comp/decomp delay statistics
- crypto: iaa - Fix async_disable descriptor leak
- crypto: iaa - Remove unnecessary debugfs_create_dir() error check in iaa_crypto_debugfs_init()
- crypto: iaa - Remove header table code
- dmaengine: idxd: constify the struct device_type usage
- dmaengine: idxd: make dsa_bus_type const
- dmaengine: idxd: Remove usage of the deprecated ida_simple_xx() API
- crypto: iaa - Account for cpu-less numa nodes
- crypto: iaa - remove unneeded semicolon
- crypto: iaa - Remove unneeded newline in update_max_adecomp_delay_ns()
- crypto: iaa - Change desc->priv to 0
- dmaengine: idxd: Add support for device/wq defaults
- crypto: iaa - Add IAA Compression Accelerator stats
- crypto: iaa - Add irq support for the crypto async interface
- crypto: iaa - Add support for deflate-iaa compression algorithm
- crypto: iaa - Add compression mode management along with fixed mode
- crypto: iaa - Add per-cpu workqueue table with rebalancing
- crypto: iaa - Add Intel IAA Compression Accelerator crypto driver core
- crypto: iaa - Add IAA Compression Accelerator Documentation
- dmaengine: idxd: add callback support for iaa crypto
- dmaengine: idxd: Add wq private data accessors
- dmaengine: idxd: Export wq resource management functions
- dmaengine: idxd: Export descriptor management functions
- dmaengine: idxd: Rename drv_enable/disable_wq to idxd_drv_enable/disable_wq, and export
- dmaengine: idxd: add external module driver support for dsa_bus_type
- dmaengine: idxd: Fix incorrect descriptions for GRPCFG register
- dmaengine: idxd: add wq driver name support for accel-config user tool
- dmaengine: idxd: rate limit printk in misc interrupt thread
- drm/phytium: Replace default efi fb0 with dc fb
- [next-6.6] phytium-Bugfix-Xorg-startup-for-ps23xx Merge pull request !188
- drm/ast: Fixed display error for ps23xx
- drm/phytium: Bugfix Xorg startup for ps23xx
- anolis: LoongArch: fix efi map page table error
- Revert "LoongArch: kdump: Add memory reservation for old kernel"
- Revert "LoongArch: Fix kdump failure on v40 interface specification"
- Revert "LoongArch: kdump: Add high memory reservation"
- LoongArch: fix HT RX INT TRANS register not initialized
- irqchip/loongson-eiointc: fix gsi register error
- irqchip: LoongArch: Fix secondary bridge routing errors
- PCI/MSI: LoongArch: Limit min pci msi-x/msi vector number
- cgroup: allow cgroup to split direct io and buffered io into different blkio cgroup
- io/tqos: add sysctl_buffer_io_limit switch for buffer io limit.
- io/tqos: merge buffer io limit series patch from brookxu, and rework some function.
- Merge branch 'caelli/cgroupfs' into 'master' (merge request !102)
- cgroupfs: optimize cpu usage
- sli: open CONFIG_CGROUP_SLI
- sli: backport sli function from tk3
- mbuf: backport mbuf functions for memcontrol/cpuacct from tk3
- btrfs: make sure that WRITTEN is set on all metadata blocks
- nvme:driver core probes in serial
- config: enable ce instruction set optimization for shangmi support
- config: enable some configs for shangmi support
- kconfig: add more module for arm64
- Merge ock repo's next branch into tk5 repo's master branch
- [next-6.6]Hisi:backport some bugfix from upstream about PCIe_PMU and hisi_hns3 perf Merge pull request !179
- drivers/perf: hisi: hns3: Actually use devm_add_action_or_reset()
- drivers/perf: hisi: hns3: Fix out-of-bound access when valid event group
- docs: perf: Update usage for target filter of hisi-pcie-pmu
- drivers/perf: hisi_pcie: Merge find_related_event() and get_event_idx()
- drivers/perf: hisi_pcie: Relax the check on related events
- drivers/perf: hisi_pcie: Check the target filter properly
- drivers/perf: hisi_pcie: Add more events for counting TLP bandwidth
- drivers/perf: hisi_pcie: Fix incorrect counting under metric mode
- drivers/perf: hisi_pcie: Introduce hisi_pcie_pmu_get_event_ctrl_val()
- drivers/perf: hisi_pcie: Rename hisi_pcie_pmu_{config,clear}_filter()
- !176 [next-6.6] net: stmmac: add 7A2000 chipset gnet support Merge pull request !176 from Ming Wang/master
- net: stmmac: dwmac-loongson: Add loongson module author
- net: stmmac: dwmac-loongson: Move disable_force flag to _gnet_date
- net: stmmac: dwmac-loongson: Add Loongson GNET support
- net: stmmac: dwmac-loongson: Fixed failure to set network speed to 1000.
- net: stmmac: dwmac-loongson: Add loongson_dwmac_config_legacy
- net: stmmac: dwmac-loongson: Add full PCI support
- net: stmmac: dwmac-loongson: Add phy_interface for Loongson GMAC
- net: stmmac: dwmac-loongson: Add phy mask for Loongson GMAC
- net: stmmac: dwmac-loongson: Add ref and ptp clocks for Loongson
- net: stmmac: dwmac-loongson: Split up the platform data initialization
- net: stmmac: dwmac-loongson: Use PCI_DEVICE_DATA() macro for device identification
- net: stmmac: dwmac-loongson: Drop useless platform data
- net: stmmac: Export dwmac1000_dma_ops
- net: stmmac: Add multi-channel support
- net: stmmac: Move the atds flag to the stmmac_dma_cfg structure
- net: stmmac: Move MAC caps init to phylink MAC caps getter
- net: stmmac: Rename phylink_get_caps() callback to update_caps()
- net: phylink: provide mac_get_caps() method
- Merge branch 'dev/mengensun/netlat_v2' into 'master' (merge request !100)
- netlat: fix warnning when del netns
- netlat: not use ack_seq to keeping timestamp
- netlat: add more queue latency check point
- net/netlat: add a tcp latency watcher
- netns/mbuf: add a per net namespace ring buffer
- tqos: open CONFIG_RQM
- tqos/mbuf: backport mbuf infrastructure from tk3
- dist: using "tk_private=1" to judge private release
- Merge branch 'frankjpliu/master' into 'master' (merge request !107)
- Merge linux 6.6.32
- Linux 6.6.32
- block: add a partscan sysfs attribute for disks
- block: add a disk_has_partscan helper
- Docs/admin-guide/mm/damon/usage: fix wrong example of DAMOS filter matching sysfs file
- docs: kernel_include.py: Cope with docutils 0.21
- admin-guide/hw-vuln/core-scheduling: fix return type of PR_SCHED_CORE_GET
- KEYS: trusted: Do not use WARN when encode fails
- remoteproc: mediatek: Make sure IPI buffer fits in L2TCM
- serial: kgdboc: Fix NMI-safety problems from keyboard reset code
- usb: typec: tipd: fix event checking for tps6598x
- usb: typec: ucsi: displayport: Fix potential deadlock
- net: usb: ax88179_178a: fix link status when link is set to down/up
- usb: dwc3: Wait unconditionally after issuing EndXfer command
- binder: fix max_thread type inconsistency
- drm/amdgpu: Fix possible NULL dereference in amdgpu_ras_query_error_status_helper()
- erofs: reliably distinguish block based and fscache mode
- erofs: get rid of erofs_fs_context
- bpf: Add missing BPF_LINK_TYPE invocations
- kselftest: Add a ksft_perror() helper
- mmc: core: Add HS400 tuning in HS400es initialization
- KEYS: trusted: Fix memory leak in tpm2_key_encode()
- Bluetooth: L2CAP: Fix div-by-zero in l2cap_le_flowctl_init()
- Bluetooth: L2CAP: Fix slab-use-after-free in l2cap_connect()
- ice: remove unnecessary duplicate checks for VF VSI ID
- ice: pass VSI pointer into ice_vc_isvalid_q_id
- net: ks8851: Fix another TX stall caused by wrong ISR flag handling
- drm/amd/display: Fix division by zero in setup_dsc_config
- smb: smb2pdu.h: Avoid -Wflex-array-member-not-at-end warnings
- ksmbd: add continuous availability share parameter
- cifs: Add tracing for the cifs_tcon struct refcounting
- smb: client: instantiate when creating SFU files
- smb: client: fix NULL ptr deref in cifs_mark_open_handles_for_deleted_file()
- smb3: add trace event for mknod
- smb311: additional compression flag defined in updated protocol spec
- smb311: correct incorrect offset field in compression header
- cifs: Move some extern decls from .c files to .h
- ksmbd: fix potencial out-of-bounds when buffer offset is invalid
- ksmbd: fix slab-out-of-bounds in smb_strndup_from_utf16()
- ksmbd: Fix spelling mistake "connction" -> "connection"
- ksmbd: fix possible null-deref in smb_lazy_parent_lease_break_close
- cifs: remove redundant variable assignment
- cifs: fixes for get_inode_info
- cifs: defer close file handles having RH lease
- ksmbd: add support for durable handles v1/v2
- ksmbd: mark SMB2_SESSION_EXPIRED to session when destroying previous session
- smb: common: simplify compression headers
- smb: common: fix fields sizes in compression_pattern_payload_v1
- smb: client: negotiate compression algorithms
- smb3: add dynamic trace point for ioctls
- smb: client: return reparse type in /proc/mounts
- smb: client: set correct d_type for reparse DFS/DFSR and mount point
- smb: client: parse uid, gid, mode and dev from WSL reparse points
- smb: client: introduce SMB2_OP_QUERY_WSL_EA
- smb: client: Fix a NULL vs IS_ERR() check in wsl_set_xattrs()
- smb: client: add support for WSL reparse points
- smb: client: reduce number of parameters in smb2_compound_op()
- smb: client: fix potential broken compound request
- smb: client: move most of reparse point handling code to common file
- smb: client: introduce reparse mount option
- smb: client: retry compound request without reusing lease
- smb: client: do not defer close open handles to deleted files
- smb: client: reuse file lease key in compound operations
- smb: client: get rid of smb311_posix_query_path_info()
- smb: client: parse owner/group when creating reparse points
- smb3: update allocation size more accurately on write completion
- smb: client: handle path separator of created SMB symlinks
- cifs: update the same create_guid on replay
- ksmbd: Add kernel-doc for ksmbd_extract_sharename() function
- cifs: set replay flag for retries of write command
- cifs: commands that are retried should have replay flag set
- smb: client: delete "true", "false" defines
- smb: Fix some kernel-doc comments
- cifs: new mount option called retrans
- smb: client: don't clobber ->i_rdev from cached reparse points
- cifs: new nt status codes from MS-SMB2
- cifs: pick channel for tcon and tdis
- cifs: minor comment cleanup
- cifs: remove redundant variable tcon_exist
- ksmbd: vfs: fix all kernel-doc warnings
- ksmbd: auth: fix most kernel-doc warnings
- cifs: remove unneeded return statement
- cifs: get rid of dup length check in parse_reparse_point()
- cifs: Pass unbyteswapped eof value into SMB2_set_eof()
- smb3: Improve exception handling in allocate_mr_list()
- cifs: fix in logging in cifs_chan_update_iface
- smb: client: handle special files and symlinks in SMB3 POSIX
- smb: client: cleanup smb2_query_reparse_point()
- smb: client: allow creating symlinks via reparse points
- smb: client: optimise reparse point querying
- smb: client: allow creating special files via reparse points
- smb: client: extend smb2_compound_op() to accept more commands
- smb: client: Fix minor whitespace errors and warnings
- smb: client: introduce cifs_sfu_make_node()
- cifs: fix use after free for iface while disabling secondary channels
- Missing field not being returned in ioctl CIFS_IOC_GET_MNT_INFO
- smb3: minor cleanup of session handling code
- smb3: more minor cleanups for session handling routines
- smb3: minor RDMA cleanup
- cifs: print server capabilities in DebugData
- smb: use crypto_shash_digest() in symlink_hash()
- Add definition for new smb3.1.1 command type
- SMB3: clarify some of the unused CreateOption flags
- cifs: Add client version details to NTLM authenticate message
- dist: remove usb-storage.ko and nouveau.ko when install private release
- dist: revert "add a modules-private rpm subpackage"
- Kconfig: add more modules
- Merge branch 'kasong/tk5/dist-optimization' into 'master' (merge request !106)
- dist: don't parse kernel version unless needed
- dist: optimize version parsing
- dist: stop using --show-toplevel for speed up

* Tue May 21 2024 Jianping Liu <frankjpliu@tencent.com> - 6.6.31-6
- Hygon: CSV3 patch series part 4 (Enable the concurrent memory allocation of CMA for Hygon CSV3) Merge pull request !173
- x86/mm: CSV allows CMA allocation concurrently
- mm/cma: add API to enable concurrent allocation from the CMA
- LoongArch: fix KASLR can not be disabled by nokaslr when boot from old BPI Merge pull request !153
- LoongArch: fix KASLR can not be disabled by nokaslr when boot from old BPI
- irqchip/loongson-pch-pic: Update interrupt registration policy
- Hygon: CSV3 patch series part 3 (Support live migration for Hygon CSV3 guest, and manage shared page by rbtree) Merge pull request !171
- x86/mm: Merge contiguous pages into a large range when notifying pages enc status changes
- KVM: SVM: CSV: Manage CSV3 guest's shared pages by rbtree
- KVM: SVM: CSV: Add ioctl API to unpin shared pages of CSV3 guest
- KVM: SVM: CSV: Add KVM_CSV3_RECEIVE_ENCRYPT_CONTEXT command
- KVM: SVM: CSV: Add KVM_CSV3_RECEIVE_ENCRYPT_DATA command
- KVM: SVM: CSV: Add KVM_CSV3_SEND_ENCRYPT_CONTEXT command
- KVM: SVM: CSV: Add KVM_CSV3_SEND_ENCRYPT_DATA command
- crypto: ccp: Define CSV3 migration command id
- Hygon:Support TKM function Merge pull request !164 from xisme/tkm
- crypto: ccp: Eliminate dependence of the kvm module on the ccp module
- Allow VM without a configured vid to use TKM
- support tkm key isolation
- Support tkm virtualization
- Support psp virtualization
- newfeature: crypto: ccp: Add psp mutex enable ioctl support
- newfeature: crypto: ccp: concurrent psp access support between user and kernel space
- Hygon: CSV3 patch series part 2 (launch and running support on both KVM and guest sides) Merge pull request !162
- x86/mm: Print CSV3 info into kernel log
- x86: Add support for changing the memory attribute for CSV3 guest
- x86: Update memory shared/private attribute in early boot for CSV3 guest
- x86/kernel: Set bss decrypted memory as shared in CSV3 guest
- x86/kernel: Add CSV3 early update(enc/dec)/reset memory helpers
- x86/boot/compressed/64: Add CSV3 update page attr(private/shared)
- x86/boot/compressed/64: Init CSV3 secure call pages
- x86/boot/compressed/64: Add CSV3 guest detection
- KVM: SVM: CSV: Manage CSV3 guest's nested page table
- KVM: SVM: CSV: Add KVM_CSV3_LAUNCH_ENCRYPT_VMCB command
- KVM: SVM: CSV: Add KVM_CSV3_LAUNCH_ENCRYPT_DATA command
- KVM: SVM: CSV: Add KVM_CSV3_INIT command
- KVM: Define CSV3 key management command id
- Hygon:Support TPM/TCM/TDM/TPCM function Merge pull request !160
- newfeature: linux: tcm: add Hygon TCM2 driver
- newfeature: linux: tpm: add Hygon TPM2 driver
- newfeature:crypto: tdm: Support dynamic protection for SCT and IDT by HYGON TDM
- newfeature: crypto: tdm: Add Hygon TDM driver
- Merge linux 6.6.31

* Fri May 17 2024 Jianping Liu <frankjpliu@tencent.com> - 6.6.30-5
- emm: update emm to v0.1.4
- config: enable CONFIG_SQUASHFS_ZSTD
- KVM: x86: Use actual kvm_cpuid.base for clearing KVM_FEATURE_PV_UNHALT
- KVM: x86: Introduce __kvm_get_hypervisor_cpuid() helper
- ksmbd: fix slab-out-of-bounds in smb_strndup_from_utf16()
- ksmbd: fix potencial out-of-bounds when buffer offset is invalid
- KVM: x86: Virtualize HWCR.TscFreqSel[bit 24]
- KVM: x86: Allow HWCR.McStatusWrEn to be cleared once set
- cpustat: make get_iowait_time external

* Mon May 13 2024 Jianping Liu <frankjpliu@tencent.com> - 6.6.30-4
- 3snic：change sssnic kernel driver name Merge pull request !159 from cleanerleon/next
- change kernel driver name to sssnic
- Hygon: CSV3 patch series part 1 (Secure memory management and initialization) Merge pull request !157 from hanliyang/next_CSV3-host-cma-smr-smcr
- crypto: ccp: Add SET_SMR/SET_SMCR commands for CSV3
- x86/mm: Manage CSV3 guest's private memory by CMA
- crypto: ccp: Define CSV3 key management command id
- KVM: SEV: Pin SEV guest memory out of CMA area
- Hygon：Fixed bugs related to THP allocation and memory page migration Merge pull request !154 from hanliyang/next_mm-fix
- mm/gup: don't check if a page is in lru before draining it
- mm/page_alloc: don't use PCP list for THP-sized allocations when using PF_MEMALLOC_PIN
- Hygon: Support reuse ASID feature for Hygon CSV Merge pull request !156 from hanliyang/next_CSV-reuse-ASID
- KVM: SVM: Add support for different CSV guests to reuse the same ASID
- Hygon: Support passthru DCU to virtual machine Merge pull request !151 from hanliyang/next_hydcu
- drm/hygon: Add support to passthrough Hygon DCU to virtual machine
- Hygon: Some enhancement and bugfixes for HYGON SME/CSV/CSV2 Merge pull request !150 from hanliyang/next_SME_CSV1_CSV2_robust
- KVM: SVM: Unmap ghcb pages if they're still mapped when destroy guest
- anolis: x86/setup: Preserve _ENC flag when initrd is being relocated
- anolis: mm/early_ioremap.c: Always build early_memremap_prot() in x86
- KVM: x86: Fix KVM_GET_MSRS stack info leak
- KVM: SEV: Do not intercept accesses to MSR_IA32_XSS for SEV-ES guests
- x86/head/64: Flush caches for .bss..decrypted section after CR3 switches to early_top_pgt
- KVM: x86: Calls is_64_bit_hypercall() instead of is_64_bit_mode() in complete_hypercall_exit()
- x86/csv2: Keep in atomic context when holding ghcb page if the #VC comes from userspace
- KVM: SVM: Fix the available ASID range for CSV2 guest
- mm/unevictable: avoid root memcg calling mem_cgroup_scan_tasks to  trigger BUG_ON
- config: add SIMPLEFB and SIMPLEDRM

* Sat May 11 2024 Jianping Liu <frankjpliu@tencent.com> - 6.6.30-3
- config: add some drm configs to support more drm

* Thu May  9 2024 Jianping Liu <frankjpliu@tencent.com> - 6.6.30-2
- irqchip/loongson-pch-pic: Update interrupt registration policy
- Merge linux 6.6.30
- Merge linux 6.6.29
- Merge branch 'ock/next'
- !146 [next-6.6]kunpeng：Backport hns3 features and bugfixes Merge pull request !146 from hongrongxuan/linux-6.6/next-ronson-dev
- net: hns3: add support for Hisilicon ptp sync device
- net: hns3: fix port vlan filter not disabled problem in dynamic vlan mode
- net: hns3: default select PAGE_POOL_STATS
- net: hns3: fix kernel crash when devlink reload during vf initialization
- net: hns3: support set/get VxLAN rule of rx flow director by ethtool
- net: ethtool: add VxLAN to the NFC API
- net: hns3: Add support for some CMIS transceiver modules
- net: sfp: Synchronize some CMIS transceiver modules from ethtool
- net: hns3: add command queue trace for hns3
- net: hns3: dump more reg info based on ras mod
- net: hns3: add support for page_pool_get_stats
- net: hns3: add support to query scc version by devlink info
- net: hns3: correct the logic of hclge_sync_vf_qb_mode()
- net: hns3: add support for FD counter
- net: hns3: allocate fd counter for queue bonding
- net: hns3: refactor the debugfs for dumping FD tcam
- net: hns3: add queue bonding mode support for VF
- net: hns3: add support for queue bonding mode of flow director
- net: hns3: add checking for vf id of mailbox
- net: hns3: fix reset timeout under full functions and queues
- net: hns3: fix delete tc fail issue
- net: hns3: Disable SerDes serial loopback for HiLink H60
- net: hns3: add new 200G link modes for hisilicon device
- net: hns3: add input parameters checking
- net: hns3: add extend interface support for read and write phy register
- net: hns3: add support set led
- net: hns3: add support set mac state
- net: hns3: add support detect port wire type
- net: hns3: add support PF provides customized interfaces to detect port faults.
- net: hns3: support set pfc pause trans time
- net: hns3: add support disable nic clock
- net: hns3: add support config and query serdes lane status
- net: hns3: add supports configure optical module enable
- net: hns3: add support query the presence of optical module
- net: hns3: add support modified tx timeout
- net: hns3: add support query port ext information
- net: hns3: add support configuring function-level interrupt affinity
- net: hns3: add support clear mac statistics
- net: hns3: add support to get/set 1d torus param
- net: hns3: add supports fast reporting of faulty nodes
- net: hns3: add supports pfc storm detection and suppression
- net: hns3: add support customized exception handling interfaces
- net: hns3: add some link modes for hisilicon device
- net: hns3: add vf fault detect support
- net: hns3: add hns3 vf fault detect cap bit support
- kunpeng：Backport some bugfixes for hisi_sas Merge pull request !143 from chenyi/linux-6.6/next-cy-dev
- scsi: hisi_sas: Modify the deadline for ata_wait_after_reset()
- scsi: hisi_sas: Remove hisi_hba->timer for v3 hw
- scsi: hisi_sas: Check whether debugfs is enabled before removing or releasing it
- scsi: libsas: Allocation SMP request is aligned to ARCH_DMA_MINALIGN
- scsi: hisi_sas: Fix the deadlock issue that occurs during automatic dump
- scsi: hisi_sas: Handle the NCQ error returned by D2H frame
- scsi: hisi_sas: Remove redundant checks for automatic debugfs dump
- scsi: hisi_sas: Allocate DFX memory during dump trigger
- scsi: hisi_sas: Directly call register snapshot instead of using workqueue
- scsi: hisi_sas: Check usage count only when the runtime PM status is RPM_SUSPENDING
- scsi: hisi_sas: Add slave_destroy interface for v3 hw
- Revert "scsi: hisi_sas: Disable SATA disk phy for severe I_T nexus reset failure"
- Hygon:Update ccp-crypto driver to support Hygon 4th CPU & add hct.ko module which needed by HCT engine Merge pull request !149 from partyCoder/next
- Commit Message: Support 1024 processes simutaneously in the hct-mdev mode.
- Commit Message: Change the maximum number of supported ccps from 16 to 48.
- Commit Message: Compiling hct.ko when the module mdev is disabled.
- ccp: supporting memory encryption features for host vfio-noiommu mode, and wb attribute for the bar memory of virtual machine.
- Add mediated ccp driver support for hygon crypto technology.
- ccp: ccp-crypto support sm2 on Hygon generation 4th CPU
- Hygon:Support CSV(2) guest attestation, CSV firmware update, CSV(2) guest migration, CSV(2) guest reboot, x86-psp communicate interfaces Merge pull request !148 from hanliyang/next
- KVM: SVM: Force flush caches before reboot CSV guest
- KVM: SVM: Add support for rebooting CSV2 guest
- KVM: x86: Introduce control_{pre,post}_system_reset ioctl interfaces
- KVM: SVM: Export MSR_AMD64_SEV_ES_GHCB to userspace for CSV2 guest
- KVM: x86: Restore control registers in __set_sregs() to support CSV2 guest live migration
- KVM: SVM: Add KVM_SEV_RECEIVE_UPDATE_VMSA command
- KVM: SVM: Add KVM_SEV_SEND_UPDATE_VMSA command
- crypto: ccp: Fix definition of struct sev_data_send_update_vmsa
- crypto: ccp: Add another mailbox interrupt support for PSP sending command to X86
- crypto: ccp: Add a new interface for X86 sending command to PSP
- KVM: SVM: Add RECEIVE_UPDATE_DATA command helper to support KVM_CSV_COMMAND_BATCH
- KVM: SVM: Add SEND_UPDATE_DATA command helper to support KVM_CSV_COMMAND_BATCH
- KVM: SVM: Prepare memory pool to allocate buffers for KVM_CSV_COMMAND_BATCH
- KVM: SVM: Add KVM_CSV_COMMAND_BATCH command for applying CSV RING_BUFFER mode
- crypto: ccp: Add support for issue commands in CSV RING_BUFFER mode
- crypto: ccp: Add support to switch to CSV RING_BUFFER mode
- crypto: ccp: Add support for dequeue status in CSV RING_BUFFER mode
- crypto: ccp: Add support for enqueue command pointers in CSV RING_BUFFER mode
- crypto: ccp: Introduce init and free helpers to manage CSV RING_BUFFER queues
- crypto: ccp: Implement CSV_DOWNLOAD_FIRMWARE ioctl command
- crypto: ccp: Implement CSV_PLATFORM_SHUTDOWN ioctl command
- crypto: ccp: Implement CSV_PLATFORM_INIT ioctl command
- crypto: ccp: Support DOWNLOAD_FIRMWARE when detect CSV
- driver/virt/coco: Add HYGON CSV Guest dirver.
- KVM: x86: Support VM_ATTESTATION hypercall
- Montage：add support for Montage Mont-TSSE Driver Merge pull request !147 from carrie.cai/next
- add support for Montage Mont-TSSE driver
- Support PSP identification for Hygon 4th CPU and print secure features when running on Hygon CPUs Merge pull request !144 from hanliyang/next_ident-hygon-cc-all-others
- x86/config: Set CONFIG_HYGON_CSV by default
- x86/cpu/hygon: Clear SME feature flag when not in use
- x86/cpufeatures: Add CSV3 CPU feature
- x86/cpufeatures: Add CPUID_8C86_0000_EDX CPUID leaf
- x86/cpu: Detect memory encryption features on Hygon CPUs
- KVM: SVM: Print Hygon CSV support info if support is detected
- crypto: ccp: Print Hygon CSV API version when CSV support is detected
- x86/mm: Print CSV info into the kernel log
- x86/mm: Provide a Kconfig entry to build the HYGON memory encryption support into the kernel
- Documentation/arch/x86: Add HYGON secure virtualization description
- crypto: ccp: Add support to detect CCP devices on Hygon 4th CPUs
- !141 add 3snic 3s9xx NIC driver Merge pull request !141 from cleanerleon/next
- add 3snic 3s9xx driver
- Hyper-V: support Hyper-V synthetic video device
- amdkfd: use calloc instead of kzalloc to avoid integer overflow
- emm: add submodule of emm
- block: fix deadlock between bd_link_disk_holder and partition scan
- md: fix kmemleak of rdev->serial
- Kconfig: delete intel atom and apple human interface device support
- driver: compile mdev.ko by default
- Kconfig: update many tencent.config of x86
- driver: make regmap-mmio.c compiled in by default
- net/proc: added sockets details statistics
- net: rps using pvipi
- smp: introduce a new interface smp_call_function_many_async
- virtio_net: disable napi_tx by default
- tcp: backport two patch from tk4 about gso
- Merge linux 6.6.28
- Merge linux 6.6.27
- dist: config: add LOCALVERSION="+debug" for debug config
- config: enable CONFIG_DEBUG_INFO_BTF in eks config
- exit: wait_task_zombie: kill the no longer necessary spin_lock_irq(siglock)
- fs/proc: do_task_stat: use sig->stats_lock to gather the threads/children stats
- fs/proc: do_task_stat: use __for_each_thread()
- net: ip_tunnel: prevent perpetual headroom growth
- dist: ensure release start with decimal number
- dist: sanitize usage of unamer
- dist: add missing place holder for loongarch64 kabi
- emm/oversell: fix memsw page counter

* Wed Apr 17 2024 Jianping Liu <frankjpliu@tencent.com> - 6.6.26-1
- SUNRPC: discard sv_refcnt, and svc_get/svc_put
- svc: don't hold reference for poolstats, only mutex.
- config: support phytium soc and ampereone pmu
- sched/eevdf: fix soft lockup while __pick_eevdf failed
- Merge linux 6.6.26
- Merge linux 6.6.25
- Merge linux 6.6.24
- Merge linux 6.6.23
- Merge linux 6.6.22
- Merge linux 6.6.21
- x86/perf: Add PMU uncore support for Zhaoxin CPU
- BeiZhongWangXin:Add Chengdu BeiZhongWangXin Technology N5/N6 Series Network Card Driver
- Hygon：Add HGSC_CERT_IMPORT ioctl interface for Hygon CPUs.
- Loogarch:add steal time hypcall software breakpoint pmu support for loongarch kvm
- Add Phytium Display Engine support to the linux-6.6
- Intel: Backport QuickAssist Technology(QAT) in-tree driver
- Loongarch: support loongarch and add kvm support for loongarch
- platform/x86/intel/ifs: Call release_firmware() when handling errors.
- crypto: ccp: Add support to detect Hygon PSP on Hygon 2nd/3rd CPUs
- crypto: ccp: Fixup the capability of Hygon PSP during initialization
- Support zhaoxin cpu
- zhaoxin: Fix CRC32C instruction low performance issue
- crypto: x86/crc32c-intel Exclude low performance CRC32C instruction CPUs
- x86/cpu: Set low performance CRC32C flag on some Zhaoxin CPUs
- x86/cpufeatures: Add low performance CRC32C instruction CPU feature
- ALSA: hda: Add support of Zhaoxin SB HDAC
- x86/cpu: Add detect extended topology for Zhaoxin CPUs
- x86/cpufeatures: Add Zhaoxin feature bits
- btrfs: fix double free of anonymous device after snapshot creation failure
- arm64: Work around Ampere Altra erratum #82288 PCIE_65
- rue/io: fix blkcg_dkstats_show_comm implicit declaration error
- emm: fix compile error of MEMCG_ZRAM_B undeclared
- tcp/dccp: add support for port usage in proportion to allocation
- cgroup: add cgroup.id to show each css id within a cgroup
- tcp: fix issues when enabling tcp_wan_timestamps feature.
- tcp: initialize sysctl_tcp_wan_timestamps to 1 by default.
- net: add net.ipv4.tcp_wan_timestamps sysctl to switch timestamps function
- mm/workingset: fix compile error when using allyesconfig in aarch64
- ck: mm: Pin code section of process in memory
- mm, oom_kill: introduce oom_kill_largest_task sysctl interface
- emm: configs: enabled EMM related configs
- emm: memcg/reclaim: adapt for enhanced memory reclaim interface
- emm: memcg/reclaim: add support for enhanced memory reclaim
- emm: memcg: add support for core memcg handling
- emm: mm: support forcing swappiness for global reclaim
- emm: mm: Kconfig: add EMM config
- emm: memcg, zram: add support for ZRAM memory accounting
- ocfs2: Avoid touching renamed directory if parent does not change
- rue/scx/sched_ext: Add a basic, userland vruntime scheduler
- rue/scx/sched_ext: Implement core-sched support
- rue/scx/sched_ext: Implement sched_ext_ops.cpu_online/offline()
- rue/scx/sched_ext: Implement sched_ext_ops.cpu_acquire/release()
- rue/scx/sched_ext: Implement runnable task stall watchdog
- rue/scx/sched_ext: Implement BPF extensible scheduler class
- script: update check-kabi script
- kabi: provide kabi check/update/create commands for local users
- config: add kernel/configs/tkci.config
- pci: bypass NVMe when booting PCIe storage with 5s delay
- pci: prohibit storage probe delay of virtio block device
- pci: delay 5s to proble multiple storage controllers
- perf vendor events arm64 AmpereOneX: Add core PMU events and metrics
- KVM: arm64: Always invalidate TLB for stage-2 permission faults
- KVM: arm64: Avoid soft lockups due to I-cache maintenance
- arm64: tlbflush: Rename MAX_TLBI_OPS
- docs/perf: Add ampere_cspmu to toctree to fix a build warning
- perf: arm_cspmu: ampere_cspmu: Add support for Ampere SoC PMU
- perf: arm_cspmu: Support implementation specific validation
- perf: arm_cspmu: Support implementation specific filters
- perf: arm_cspmu: Split 64-bit write to 32-bit writes
- perf: arm_cspmu: Separate Arm and vendor module
- x86 and arm64 config: add more module config
- config: enable slub debug as default in debug.config
- config: enable CONFIG_HARDLOCKUP_DETECTOR
- Add support for Hygon model 4h~6h processors Merge
- Intel: Backport GNR/SRF PMU uncore support to kernel v6.6
- Intel: Backport SRF/GRR perf cstate support to kernel v6.6
- Intel: Backport SRF LBR branch counter support to kernel v6.6
- Intel-SIG: microcode restructuring backport Merge pull request
- Intel-SIG: backport cluster scheduler wakeup optimization
- SAF & Array BIST support for GNR & SRF
- RDT non-contiguous CBM support

* Wed Dec 20 2023 Kairui Song <kasong@tencent.com> - 6.6.6-2401.0.1
- kabi: freeze kabi for x86_64 and arm64
- x86/mpparse, kexec: switch apic driver early when x2apic is pre-enabled
- tracing: workaround UAF caused by memory ordering issue
- mm/slub.c: sanitize freelist pointer assignment even more
- mm/slub.c: fix a potential UAF
- cgroup: use a standalone workqueue for killing css
- mm/vmscan.c: add cond_resched function call into __shrink_page_cache
- swap: expose required symbols for some 3rd part modules
- swapfile: add a helper get_cached_swap_page_of_type
- mm: memcg: introduce v2's interface to v1
- psi: only show SOME PSI for non-IRQ in cgroup v1
- psi: support cgroup v1 psi accounting
- psi: expose cgroup v1 interface for psi
- psi: link legacy root to psi_system
- sched/psi: simplify cgroup psi retrieving
- arm64: fake a reliable stacktrace for livepath
- arm64: enable livepatch without stable stacktrace
- arm64: basic infrastructure for livepatch
- pagecachelimit: limit the pagecache ratio of totalram
- blkcg: add buffer IO throttle for cgroup v1
- cgroupfs: support stat based on cpuacct
- cgroupfs: fix non inited i_ino when inode created
- cgroupfs: add files inside sys
- cgroupfs: support for proc and sys
- cgroupfs: quota aware support
- cgroupfs: refactor cgroup resource statistics for reuse
- memcg: make meminfo optionally recursive and rework
- memcg: add meminfo and vmstat show
- cpuset: add switch support for cpuset.stat in container
- cpuset: fix cpuset.stat process field value exception
- cpuset: add switch for cpuinfo in container
- cpuset: add loadavg calc for each container
- cpuset: add cpuinfo and stat show
- sysfs: add sysfs attribute to hide disk devices
- blkcg/diskstats/dm: add support for blkcg diskstats
- blkcg/diskstats/md: add support for blkcg diskstats
- blkcg/diskstats: add per blkcg diskstats support
- ext4: Add an error info during new_inode
- ext4: fix soft lockup caused by sbi->s_es_lru
- ceph: add mds request pid info into debugfs
- ceph: Add new mount option req_resend
- ceph: re-send osd requests if timeout
- nvme: add the hotplug info output about drive letter and BDF
- nbd: add the nbd_ignore_blksize_set support
- xfs: add kmem_alloc_by_vmalloc and kmem_alloc_large_dump_stack sysctl
- xfs: set xfs default error level to 5
- ceph: add sysctl to ignore error epoch barrier
- ext3: set nobarrier as default
- block: check whether queue is NULL or not in stats functions
- net: modify default value of host max_orphan
- net: namespaceify sysctl_tcp_max_orphans
- vm: isolate max_map_count by pid namespace
- cpuacct: get the uptime of container
- proc: add pid mapping between host and container
- taskstats: expose taskstats to all netspace
- tcp: make TCP_RTO_MIN/MAX be tunable
- tcp: support self define parameter to tune rto of syn/synack packets
- tcp: introduce sysctl tcp_inherit_buffsize
- net: ipv6 neigh tunnel bypass
- net: add sysctl to control page frag
- net: add sriov debug info
- net: increase tcp listen hash
- tcp: add TCP_FULLNAT_REAL setsockopt options for fullnat real ip
- net: reduce the confliction while multi threads connecting same host
- bonding: add broadcast_arp param to send arp broadcast
- netlink: don't modprobe proto audit & selinux
- tcp: add proc parameter to change init cwnd
- net: add tcp_no_delay_ack to enable absolute quick ack
- tcp: add tcp_loss_init_cwnd sysctl to tunnel packet numbers in loss
- network: default zero bond_devices to support
- tcp: double the default value of thash_entries
- tcp: backoff the commit allowing timestamps even if SYN packet has tsval=0
- net: dev ipv4/v6 stat
- net: add tcp drop stats
- ipmi: set kipmid_max_busy_us default to 1
- sched: adaptive default skew_tick value
- ipc/msg: increase defaults for shmmall, shmmax, msgmax and msgmnb
- mm: increase dirty-ratio from 20 to 40
- tkernel: netfilter: conntrack: add netagent extention slot
- tkernel: net: add toa support
- tkernel: mounts: add shield mountpoint in container support
- tkernel: netatop: add netatop module in kernel/tkernel/
- tkernel: ttools: add ttools module to support ptrace protect
- tkernel: initial support and nonpriv_bind
- sysrq: add ALT+LEFTCTRL to trigger crash dump
- kabi: add paddings and optimize (part 3)
- kabi: add paddings (part 2)
- kabi: add paddings (part 1)
- kabi: add kabi.h
- kabi: modules: better vermagic check on module load
- config: update config for ocks-2401
- dist: config: update config from ocks-2303
- dist: config: add default config files
- dist: fix script checker
- dist: tools/vm -> tools/mm
- dist: move libcpupower.so to kernel-libs
- dist: initial support
- Linux 6.6.6
